#/bin/bash
#
i3_config=~/.config/i3/config
yabar_dir=~/.config/yabar

function i3 {
    echo "Setting i3"
    cp ./i3/config $i3_config
}

function wallpaper {
    echo "Setting Wallpaper"
    echo "Enter the wallpaper's absolute path: "
    read wallpaper_path
    echo

    # Escaping '/'
    wallpaper_path=python3 -c "print('$wallpaper_path'.replace('/', '\/'))"
    wallpaper_token=WALLPAPER_PATH
    sed -i "" "s/$wallpaper_token/$wallpaper_path/g" $i3_config
}


function yabar {
    echo "Setting Yabar"
    cp -r yabar  ~/.config
    cp -r script $yabar_dir

    echo "Choose a yabar's config: 'Romain', 'Robin' or 'Yann': "
    read config_name
    echo

    if [[ $config_name == "Romain" ]]; then
        yabar_config="yabaromain.conf"
    else if [[ $config_name == "Robin" ]]; then
        yabar_config="yabarobin.conf"
    fi

    # Escaping '/'
    yabar_dir=$(python3 -c "print('$yabar_dir'.replace('/', '\/'))")
    sed -i "" "s/YABAR_CONFIG_FILE/$yabar_dir\/$yabar_config/g" $i3_config
}

function rofi {
    echo "Setting Rofi"
    echo "NOT IMPLEMENTED"
}

function vim {
    echo "Setting Vim"
    ./vim/install_plugins.sh
    cp ./vim/vimrc ~/.vimrc
}

function compton {
    cp ./compton/compton.conf ~/.config
    echo "exec compton  --config ~/.config/compton.conf -b" >> $i3_config
}

i3
wallpaper
yabar
rofi
vim
compton
